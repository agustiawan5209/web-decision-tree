import{r as s,K as A,m as D,j as e,L as F}from"./app-TSYLOfGo.js";import{C as W}from"./classify-pemeriksaan-B1_sleLV.js";import{I as y}from"./input-error-CUJ1Dss0.js";import{C as q,a as B}from"./card-BDfyZtS2.js";import{I as N}from"./input-f--SAutY.js";import{L as v}from"./label-FQFUKQUs.js";import{T as H}from"./use-mobile-navigation-J1Bz5xez.js";import{A as J}from"./app-layout-BObc0ifo.js";import"./dialog-C1s-JYrP.js";import"./index-BnlWjsxb.js";import"./proxy-TbOm_buQ.js";import"./index-DDb50-6D.js";import"./select-BdXchkXm.js";import"./check-Bq2nwx4y.js";import"./react-icons.esm-BaeMcvOJ.js";import"./decision-tree-model-CzIb8K4S.js";import"./loader-circle-C1u9jj0m.js";import"./leafy-green-CT-BMrqA.js";import"./baby-Dz5xfkuS.js";function pe({breadcrumb:p,balita:K,kriteria:u,orangtua:i}){const w=s.useMemo(()=>p?p.map(a=>({title:a.title,href:a.href})):[],[p]),[r,_]=s.useState(null),[m,g]=s.useState({title:"",show:!1,message:"",type:"success"}),{auth:U}=A().props,T=new Date().toISOString().split("T")[0],{data:c,setData:l,post:C,processing:f,errors:n}=D({rme:"20111",orang_tua_id:"",nik:"201920293029",nama:"Rahmat",tempat_lahir:"makassar",tanggal_lahir:"",jenis_kelamin:"Laki-Laki",alamat:"Makassar",tanggal_pemeriksaan:T,kriteria:u.map(a=>({nilai:null,kriteria_id:a.id.toString(),name:a.nama})),label:"",alasan:"",rekomendasi:"",usia_balita:"",detail:[]}),S=a=>{var t;a.preventDefault(),c.label==""&&l("label",((t=r==null?void 0:r.label)==null?void 0:t.toString())??""),C(route("pemeriksaan.store"),{onError:o=>{console.log(o),g({title:"Error",show:!0,message:JSON.stringify(o),type:"error"})}})},[d,L]=s.useState(null),[x,O]=s.useState(""),j=s.useCallback(a=>!(i!=null&&i.length)||!a?null:i.find(t=>t.id===a)??null,[i]),[E,I]=s.useState(""),[M,k]=s.useState([]),[R,h]=s.useState(!1),P=a=>{const t=a.target.value;if(I(t),t.length>2){const o=i.filter(b=>b.name.toLowerCase().includes(t.toLowerCase())||b.email.toLowerCase().includes(t.toLowerCase()));o.length>0?(k(o),h(!0),n.orang_tua_id=""):n.orang_tua_id="Nama Orang Tua/Wali Tidak Terdaftar"}else k([]),h(!1),n.orang_tua_id="Nama Orang Tua/Wali Tidak Terdaftar"};return s.useEffect(()=>{if(x){const a=j(x);L(a),a&&(h(!1),l("orang_tua_id",a.id),l("alamat",a.alamat))}},[x,j,l]),s.useEffect(()=>{r&&r.label&&l("label",r.label.toString())},[r]),e.jsxs(J,{breadcrumbs:w,children:[e.jsx(F,{title:"Create"}),e.jsx(H,{open:m.show,onOpenChange:()=>g(a=>({...a,show:!1})),title:m.title,description:m.message,duration:5e3,variant:m.type}),e.jsx("div",{className:"dark:bg-elevation-1 flex h-full flex-1 flex-col gap-4 rounded-xl p-1 lg:p-4",children:e.jsx("div",{className:"relative min-h-[100vh] flex-1 overflow-hidden rounded-xl border border-sidebar-border/70 md:min-h-min dark:border-sidebar-border",children:e.jsx(q,{children:e.jsxs(B,{children:[e.jsxs("div",{className:"grid gap-6",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(v,{htmlFor:"rme",children:"No. RME (Rekam Medis Elekronik) "}),e.jsx(N,{id:"rme",type:"text",required:!0,autoFocus:!0,tabIndex:1,autoComplete:"rme",value:c.rme,onChange:a=>l({...c,rme:a.target.value}),disabled:f,placeholder:"Masukkan Nomor Rekam Medis Elektronik"}),e.jsx(y,{message:n.rme,className:"mt-2"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(v,{htmlFor:"orang_tua",children:"Nama Orang Tua"}),e.jsxs("div",{className:"relative w-full p-2",children:[e.jsx(N,{type:"search",id:"orang_tua",placeholder:"cari berdasarkan nama atau email yang terdaftar",required:!0,value:E,onChange:a=>P(a)}),R&&e.jsx("div",{className:"absolute top-10 rounded-xl bg-white p-2 shadow-lg",children:e.jsx("ul",{children:M.map(a=>e.jsx("li",{onClick:()=>O(a.id),className:"cursor-pointer p-2 hover:bg-gray-200",children:a.name},a.id))})})]}),e.jsx(y,{message:n.orang_tua_id})]}),d&&e.jsxs("div",{className:"space-y-4 rounded-xl border border-blue-100 bg-blue-50 p-4 dark:border-gray-700 dark:bg-gray-700/50",children:[e.jsx("h3",{className:"text-lg font-semibold text-blue-800 dark:text-blue-300",children:"Informasi Orang Tua"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Nama Orang Tua/Mewakili"}),e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:d.name})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Email"}),e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:d.email})]}),e.jsxs("div",{className:"space-y-1 md:col-span-1",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Alamat"}),e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:d.alamat})]}),e.jsxs("div",{className:"space-y-1 md:col-span-1",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"No. Hp/Whatsapp"}),e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:d.nohp})]})]})]})]}),u&&e.jsx("div",{className:"mt-6",children:e.jsx(W,{submit:S,kriteria:u,setResult:_,data:c,setData:l,processing:f,errors:n})})]})})})})]})}export{pe as default};

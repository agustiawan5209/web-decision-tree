import{r as t,K as A,m as D,j as e,L as F}from"./app-BmKeOAo8.js";import{C as W}from"./classify-pemeriksaan-CVylYiDH.js";import{I as y}from"./input-error-BhVM9K0c.js";import{C as q,a as B}from"./card-C50K93Q2.js";import{I as N}from"./input-ASvGWMAq.js";import{L as v}from"./label-BpTkT5qM.js";import{T as H}from"./use-mobile-navigation-sEpqxZQr.js";import{A as J}from"./app-layout-BJs_mVDv.js";import"./dialog-BUSu6aK-.js";import"./index-BpbHWGZt.js";import"./proxy-NDnMJSoV.js";import"./index-CHSFJr6T.js";import"./select-ZsM2HQgS.js";import"./check-aWeHpBmv.js";import"./react-icons.esm-DrSLSvqa.js";import"./decision-tree-model-B6YVC7iu.js";import"./react-select-animated.esm-DTzedc95.js";import"./table-dataset-sayuran-DEDotTZT.js";import"./table-W7uTB-tQ.js";import"./utensils-CE_vVDAW.js";import"./loader-circle-Bh4Lcsea.js";import"./baby-BZ8EI2x_.js";function he({breadcrumb:p,balita:K,kriteria:u,orangtua:i}){const w=t.useMemo(()=>p?p.map(a=>({title:a.title,href:a.href})):[],[p]),[r,_]=t.useState(null),[m,g]=t.useState({title:"",show:!1,message:"",type:"success"}),{auth:U}=A().props,T=new Date().toISOString().split("T")[0],{data:c,setData:l,post:C,processing:f,errors:n}=D({rme:"",orang_tua_id:"",nik:"",nama:"",tempat_lahir:"",tanggal_lahir:"",jenis_kelamin:"",alamat:"",tanggal_pemeriksaan:T,kriteria:u.map(a=>({nilai:null,kriteria_id:a.id.toString(),name:a.nama})),label:"",alasan:"",rekomendasi:[],gejala:"",usia_balita:"",detail:[]}),S=a=>{var s;a.preventDefault(),c.label==""&&l("label",((s=r==null?void 0:r.label)==null?void 0:s.toString())??""),C(route("pemeriksaan.store"),{onError:d=>{console.log(d),g({title:"Error",show:!0,message:JSON.stringify(d),type:"error"})}})},[o,O]=t.useState(null),[x,L]=t.useState(""),j=t.useCallback(a=>!(i!=null&&i.length)||!a?null:i.find(s=>s.id===a)??null,[i]),[E,I]=t.useState(""),[M,b]=t.useState([]),[R,h]=t.useState(!1),P=a=>{const s=a.target.value;if(I(s),s.length>2){const d=i.filter(k=>k.name.toLowerCase().includes(s.toLowerCase())||k.email.toLowerCase().includes(s.toLowerCase()));d.length>0?(b(d),h(!0),n.orang_tua_id=""):n.orang_tua_id="Nama Orang Tua/Wali Tidak Terdaftar"}else b([]),h(!1),n.orang_tua_id="Nama Orang Tua/Wali Tidak Terdaftar"};return t.useEffect(()=>{if(x){const a=j(x);O(a),a&&(h(!1),l("orang_tua_id",a.id),l("alamat",a.alamat))}},[x,j,l]),t.useEffect(()=>{r&&r.label&&l("label",r.label.toString())},[r]),e.jsxs(J,{breadcrumbs:w,children:[e.jsx(F,{title:"Create"}),e.jsx(H,{open:m.show,onOpenChange:()=>g(a=>({...a,show:!1})),title:m.title,description:m.message,duration:5e3,variant:m.type}),e.jsx("div",{className:"dark:bg-elevation-1 flex h-full flex-1 flex-col gap-4 rounded-xl p-1 lg:p-4",children:e.jsx("div",{className:"relative min-h-[100vh] flex-1 overflow-hidden rounded-xl border border-sidebar-border/70 md:min-h-min dark:border-sidebar-border",children:e.jsx(q,{children:e.jsxs(B,{children:[e.jsxs("div",{className:"grid gap-6",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(v,{htmlFor:"rme",children:"No. RME (Rekam Medis Elekronik) "}),e.jsx(N,{id:"rme",type:"text",required:!0,autoFocus:!0,tabIndex:1,autoComplete:"rme",value:c.rme,onChange:a=>l({...c,rme:a.target.value}),disabled:f,placeholder:"Masukkan Nomor Rekam Medis Elektronik"}),e.jsx(y,{message:n.rme,className:"mt-2"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(v,{htmlFor:"orang_tua",children:"Nama Orang Tua"}),e.jsxs("div",{className:"relative w-full p-2",children:[e.jsx(N,{type:"search",id:"orang_tua",placeholder:"cari berdasarkan nama atau email yang terdaftar",required:!0,value:E,onChange:a=>P(a)}),R&&e.jsx("div",{className:"absolute top-10 rounded-xl bg-white p-2 shadow-lg",children:e.jsx("ul",{children:M.map(a=>e.jsx("li",{onClick:()=>L(a.id),className:"cursor-pointer p-2 hover:bg-gray-200",children:a.name},a.id))})})]}),e.jsx(y,{message:n.orang_tua_id})]}),o&&e.jsxs("div",{className:"space-y-4 rounded-xl border border-blue-100 bg-blue-50 p-4 dark:border-gray-700 dark:bg-gray-700/50",children:[e.jsx("h3",{className:"text-lg font-semibold text-blue-800 dark:text-blue-300",children:"Informasi Orang Tua"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Nama Orang Tua/Mewakili"}),e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:o.name})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Email"}),e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:o.email})]}),e.jsxs("div",{className:"space-y-1 md:col-span-1",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Alamat"}),e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:o.alamat})]}),e.jsxs("div",{className:"space-y-1 md:col-span-1",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"No. Hp/Whatsapp"}),e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:o.nohp})]})]})]})]}),u&&e.jsx("div",{className:"mt-6",children:e.jsx(W,{submit:S,kriteria:u,setResult:_,data:c,setData:l,processing:f,errors:n})})]})})})})]})}export{he as default};

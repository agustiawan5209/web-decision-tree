import{r as l,m as G,j as e,L as T}from"./app-DcneQE3y.js";import{I as t}from"./input-error-DOtoh9U-.js";import{B}from"./proxy-CepMwaQ6.js";import{I as c}from"./input-CS08_VC6.js";import{L as m}from"./label-C1MJqpT0.js";import{A as w}from"./app-layout--lLQW3o0.js";import{i as A,S as N}from"./react-select-animated.esm-KXKDX1D2.js";import{L as J}from"./loader-circle-BZ1rsAcM.js";import"./index-Q_OI6t_I.js";import"./react-icons.esm-a2hNxGTB.js";import"./index-DIYsINuK.js";import"./use-mobile-navigation-PdNF5KYm.js";import"./chart-column-CAesDUkv.js";import"./baby-DOoyboyW.js";function S({breadcrumb:j,gejala:f,label:v,datasetSayuran:s}){const C=l.useMemo(()=>j?j.map(i=>({title:i.title,href:i.href})):[],[j]),M=l.useMemo(()=>{if(s!=null&&s.gejala){if(typeof s.gejala=="string")try{return JSON.parse(s.gejala)}catch{return s.gejala.split(",").map(a=>a.trim())}return s.gejala}return[]},[s]),_=l.useMemo(()=>{if(s!=null&&s.status){if(typeof s.status=="string")try{return JSON.parse(s.status)}catch{return s.status.split(",").map(a=>a.trim())}return s.status}return[]},[s]),[u,I]=l.useState(M),[h,P]=l.useState(_),{data:p,setData:o,post:L,processing:r,errors:n}=G({id:(s==null?void 0:s.id)??0,nama_sayuran:(s==null?void 0:s.nama_sayuran)??"",nutrisi:(s==null?void 0:s.nutrisi)??"",manfaat:(s==null?void 0:s.manfaat)??"",status:"",gejala:"",porsi:(s==null?void 0:s.porsi)??"40 - 50 gram ",porsi_hari:(s==null?void 0:s.porsi_hari)??"50 - 70 gram",penyajian:(s==null?void 0:s.penyajian)??""});l.useEffect(()=>{o("gejala",u.join(", ")),o("status",h.join(", "))},[u,h,o]);const k=i=>{i.preventDefault(),L(route("admin.datasetSayuran.store"),{onError:a=>console.log(a)})},d=l.useMemo(()=>f.map(i=>({value:i.nama,label:i.nama})),[f]),x=l.useMemo(()=>v.map(i=>({value:i.nama,label:i.nama})),[v]),F=l.useMemo(()=>d.filter(i=>u.includes(i.value)),[d,u]),D=l.useMemo(()=>x.filter(i=>h.includes(i.value)),[x,h]),b=A(),E=i=>{const a=i?i.map(g=>g.value):[];I(a)},q=i=>{const a=i?i.map(g=>g.value):[];P(a)};return e.jsxs(w,{breadcrumbs:C,children:[e.jsx(T,{title:s?"Edit Dataset Sayuran":"Tambah Dataset Sayuran"}),e.jsx("div",{className:"dark:bg-elevation-1 flex h-full flex-1 flex-col gap-4 rounded-xl p-1 lg:p-4",children:e.jsx("div",{className:"relative min-h-[100vh] flex-1 rounded-xl border border-sidebar-border/70 md:min-h-min dark:border-sidebar-border",children:e.jsx("div",{className:"p-4 md:p-6",children:e.jsx("form",{className:"flex flex-col gap-6",onSubmit:k,children:e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(m,{htmlFor:"nama_sayuran",children:"Nama Sayuran"}),e.jsx(c,{id:"nama_sayuran",type:"text",required:!0,autoFocus:!0,tabIndex:1,autoComplete:"nama_sayuran",value:p.nama_sayuran,onChange:i=>o("nama_sayuran",i.target.value),disabled:r,placeholder:"Nama Sayuran"}),e.jsx(t,{message:n.nama_sayuran,className:"mt-2"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(m,{htmlFor:"nutrisi",children:"Nutrisi Buah"}),e.jsx(c,{id:"nutrisi",type:"text",required:!0,tabIndex:2,autoComplete:"nutrisi",value:p.nutrisi,onChange:i=>o("nutrisi",i.target.value),disabled:r,placeholder:"Nutrisi pada buah"}),e.jsx(t,{message:n.nutrisi,className:"mt-2"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(m,{htmlFor:"penyajian",children:"Cara Penyajian"}),e.jsx(c,{id:"penyajian",type:"text",required:!0,tabIndex:3,autoComplete:"penyajian",value:p.penyajian,onChange:i=>o("penyajian",i.target.value),disabled:r,placeholder:"Masukkan Cara Penyajian Makanan"}),e.jsx(t,{message:n.penyajian})]})]}),e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(m,{htmlFor:"porsi",children:"Porsi Per Saji (usia 1-3 Tahun)"}),e.jsx(c,{id:"porsi",type:"text",required:!0,tabIndex:3,autoComplete:"porsi",value:p.porsi,onChange:i=>o("porsi",i.target.value),disabled:r,placeholder:"Masukkan Porsi Per Saji (usia 1-3 Tahun)"}),e.jsx(t,{message:n.porsi})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(m,{htmlFor:"porsi_hari",children:"Porsi Per Saji (usia 4-6 Tahun)"}),e.jsx(c,{id:"porsi_hari",type:"text",required:!0,tabIndex:3,autoComplete:"porsi_hari",value:p.porsi_hari,onChange:i=>o("porsi_hari",i.target.value),disabled:r,placeholder:"Masukkan Porsi Per Saji (usia 4-6 Tahun)"}),e.jsx(t,{message:n.porsi_hari})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(m,{htmlFor:"gejala",children:"Gejala"}),e.jsx(N,{id:"gejala",name:"gejala",value:F,onChange:E,closeMenuOnSelect:!1,components:b,isMulti:!0,options:d,isDisabled:r,className:"react-select-container",classNamePrefix:"react-select",tabIndex:4,placeholder:"Pilih gejala..."}),e.jsx(t,{message:n.gejala})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(m,{htmlFor:"status",children:"Status Nutrisi"}),e.jsx(N,{id:"status",name:"status",value:D,onChange:q,closeMenuOnSelect:!1,components:b,isMulti:!0,options:x,isDisabled:r,className:"react-select-container",classNamePrefix:"react-select",tabIndex:5,placeholder:"Pilih status nutrisi..."}),e.jsx(t,{message:n.status})]})]}),e.jsx("div",{className:"md:col-span-2",children:e.jsxs(B,{type:"submit",variant:"default",className:"mt-2 w-full",tabIndex:6,disabled:r,children:[r&&e.jsx(J,{className:"mr-2 h-4 w-4 animate-spin"}),s?"Update":"Simpan"]})})]})})})})})]})}export{S as default};

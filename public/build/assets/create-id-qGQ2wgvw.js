import{r as t,K as P,m as A,j as e,L as D}from"./app-DcneQE3y.js";import{C as W}from"./classify-pemeriksaan-BrLt1AMW.js";import{I as M}from"./input-error-DOtoh9U-.js";import{C as R,a as U}from"./card-NFv8WVE_.js";import{I as q}from"./input-CS08_VC6.js";import{L as z}from"./label-C1MJqpT0.js";import{T as B}from"./use-mobile-navigation-PdNF5KYm.js";import{A as F}from"./app-layout--lLQW3o0.js";import"./dialog-Cmz6VoZY.js";import"./index-DIYsINuK.js";import"./proxy-CepMwaQ6.js";import"./index-Q_OI6t_I.js";import"./select-1PkxQEl0.js";import"./check-BQJQqpja.js";import"./react-icons.esm-a2hNxGTB.js";import"./decision-tree-model-DGPQ5HyE.js";import"./react-select-animated.esm-KXKDX1D2.js";import"./table-dataset-sayuran-CiLRZZCe.js";import"./table-D05A7aNV.js";import"./loader-circle-BZ1rsAcM.js";import"./chart-column-CAesDUkv.js";import"./baby-DOoyboyW.js";function he({breadcrumb:p,balita:G,kriteria:u,orangtua:i}){const y=t.useMemo(()=>p?p.map(a=>({title:a.title,href:a.href})):[],[p]),[s,N]=t.useState(null),[m,g]=t.useState({title:"",show:!1,message:"",type:"success"}),{auth:H}=P().props,k=new Date().toISOString().split("T")[0],{data:f,setData:l,post:v,processing:w,errors:n}=A({rme:"",orang_tua_id:"",nik:"",nama:"",tempat_lahir:"",tanggal_lahir:"",jenis_kelamin:"",alamat:"",tanggal_pemeriksaan:k,kriteria:u.map(a=>({nilai:null,kriteria_id:a.id.toString(),name:a.nama})),label:"",alasan:"",rekomendasi:[],gejala:"",usia_balita:"",detail:[],klasifikasiUsia:[],statusGizi:[]}),_=a=>{var r,d;a.preventDefault(),f.label==""?l("label",((r=s==null?void 0:s.label)==null?void 0:r.toString())??""):v(route("pemeriksaan.store",{label:(d=s==null?void 0:s.label)==null?void 0:d.toString()}),{onError:c=>{g({title:"Error",show:!0,message:JSON.stringify(c),type:"error"})},preserveState:!0})},[o,S]=t.useState(null),[x,T]=t.useState(""),j=t.useCallback(a=>!(i!=null&&i.length)||!a?null:i.find(r=>r.id===a)??null,[i]),[C,O]=t.useState(""),[L,b]=t.useState([]),[E,h]=t.useState(!1),I=a=>{const r=a.target.value;if(O(r),r.length>2){const d=i.filter(c=>c.name.toLowerCase().includes(r.toLowerCase())||c.email.toLowerCase().includes(r.toLowerCase()));d.length>0?(b(d),h(!0),n.orang_tua_id=""):n.orang_tua_id="Nama Orang Tua/Wali Tidak Terdaftar"}else b([]),h(!1),n.orang_tua_id="Nama Orang Tua/Wali Tidak Terdaftar"};return t.useEffect(()=>{if(x){const a=j(x);S(a),a&&(h(!1),l("orang_tua_id",a.id),l("alamat",a.alamat))}},[x,j,l]),t.useEffect(()=>{s&&s.label&&l("label",s.label.toString())},[s]),e.jsxs(F,{breadcrumbs:y,children:[e.jsx(D,{title:"Create"}),e.jsx(B,{open:m.show,onOpenChange:()=>g(a=>({...a,show:!1})),title:m.title,description:m.message,duration:5e3,variant:m.type}),e.jsx("div",{className:"dark:bg-elevation-1 flex h-full flex-1 flex-col gap-4 rounded-xl p-1 lg:p-4",children:e.jsx("div",{className:"relative min-h-[100vh] flex-1 overflow-hidden rounded-xl border border-sidebar-border/70 md:min-h-min dark:border-sidebar-border",children:e.jsx(R,{children:e.jsxs(U,{children:[e.jsxs("div",{className:"grid gap-6",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(z,{htmlFor:"orang_tua",children:"Nama Orang Tua"}),e.jsxs("div",{className:"relative w-full p-2",children:[e.jsx(q,{type:"search",id:"orang_tua",placeholder:"cari berdasarkan nama atau email yang terdaftar",required:!0,value:C,onChange:a=>I(a)}),E&&e.jsx("div",{className:"absolute top-10 rounded-xl bg-white p-2 shadow-lg",children:e.jsx("ul",{children:L.map(a=>e.jsx("li",{onClick:()=>T(a.id),className:"cursor-pointer p-2 hover:bg-gray-200",children:a.name},a.id))})})]}),e.jsx(M,{message:n.orang_tua_id})]}),o&&e.jsxs("div",{className:"space-y-4 rounded-xl border border-blue-100 bg-blue-50 p-4 dark:border-gray-700 dark:bg-gray-700/50",children:[e.jsx("h3",{className:"text-lg font-semibold text-blue-800 dark:text-blue-300",children:"Informasi Orang Tua"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Nama Orang Tua/Mewakili"}),e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:o.name})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Email"}),e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:o.email})]}),e.jsxs("div",{className:"space-y-1 md:col-span-1",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Alamat"}),e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:o.alamat})]}),e.jsxs("div",{className:"space-y-1 md:col-span-1",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"No. Hp/Whatsapp"}),e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:o.nohp})]})]})]})]}),u&&e.jsx("div",{className:"mt-6",children:e.jsx(W,{submit:_,kriteria:u,setResult:N,data:f,setData:l,processing:w,errors:n})})]})})})})]})}export{he as default};

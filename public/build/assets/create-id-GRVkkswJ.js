import{r as s,K as A,m as D,j as e,L as F}from"./app-p1d1iYTT.js";import{C as W}from"./classify-pemeriksaan-CMFxHn5b.js";import{I as y}from"./input-error-QLgA3Pc8.js";import{C as q,a as B}from"./card-NGunc_7Z.js";import{I as N}from"./input-BaGDxs8C.js";import{L as v}from"./label-Ck9bnV8R.js";import{T as H}from"./use-mobile-navigation-BGu3vK2M.js";import{A as J}from"./app-layout-BJJaYQAX.js";import"./dialog-BMN9IYIT.js";import"./index-Tjcag87-.js";import"./proxy-Nz_H2BkD.js";import"./index-Cjn_AsS7.js";import"./select-BRiKMjMw.js";import"./check-CjYXk_pq.js";import"./react-icons.esm-QNYR1xQ_.js";import"./decision-tree-model-C2qyoLfC.js";import"./react-select-animated.esm-D1Z4HCBc.js";import"./table-dataset-sayuran-DTNa0Z5j.js";import"./table-D1Aj9FeW.js";import"./loader-circle-CXfS1Liy.js";import"./baby-bUSWWp9y.js";function xe({breadcrumb:p,balita:K,kriteria:u,orangtua:i}){const w=s.useMemo(()=>p?p.map(a=>({title:a.title,href:a.href})):[],[p]),[r,_]=s.useState(null),[m,g]=s.useState({title:"",show:!1,message:"",type:"success"}),{auth:U}=A().props,T=new Date().toISOString().split("T")[0],{data:c,setData:l,post:C,processing:f,errors:n}=D({rme:"",orang_tua_id:"",nik:"",nama:"",tempat_lahir:"",tanggal_lahir:"",jenis_kelamin:"",alamat:"",tanggal_pemeriksaan:T,kriteria:u.map(a=>({nilai:null,kriteria_id:a.id.toString(),name:a.nama})),label:"",alasan:"",rekomendasi:[],gejala:"",usia_balita:"",detail:[]}),S=a=>{var t;a.preventDefault(),c.label==""&&l("label",((t=r==null?void 0:r.label)==null?void 0:t.toString())??""),C(route("pemeriksaan.store"),{onError:d=>{console.log(d),g({title:"Error",show:!0,message:JSON.stringify(d),type:"error"})}})},[o,O]=s.useState(null),[x,L]=s.useState(""),j=s.useCallback(a=>!(i!=null&&i.length)||!a?null:i.find(t=>t.id===a)??null,[i]),[E,I]=s.useState(""),[M,b]=s.useState([]),[R,h]=s.useState(!1),P=a=>{const t=a.target.value;if(I(t),t.length>2){const d=i.filter(k=>k.name.toLowerCase().includes(t.toLowerCase())||k.email.toLowerCase().includes(t.toLowerCase()));d.length>0?(b(d),h(!0),n.orang_tua_id=""):n.orang_tua_id="Nama Orang Tua/Wali Tidak Terdaftar"}else b([]),h(!1),n.orang_tua_id="Nama Orang Tua/Wali Tidak Terdaftar"};return s.useEffect(()=>{if(x){const a=j(x);O(a),a&&(h(!1),l("orang_tua_id",a.id),l("alamat",a.alamat))}},[x,j,l]),s.useEffect(()=>{r&&r.label&&l("label",r.label.toString())},[r]),e.jsxs(J,{breadcrumbs:w,children:[e.jsx(F,{title:"Create"}),e.jsx(H,{open:m.show,onOpenChange:()=>g(a=>({...a,show:!1})),title:m.title,description:m.message,duration:5e3,variant:m.type}),e.jsx("div",{className:"dark:bg-elevation-1 flex h-full flex-1 flex-col gap-4 rounded-xl p-1 lg:p-4",children:e.jsx("div",{className:"relative min-h-[100vh] flex-1 overflow-hidden rounded-xl border border-sidebar-border/70 md:min-h-min dark:border-sidebar-border",children:e.jsx(q,{children:e.jsxs(B,{children:[e.jsxs("div",{className:"grid gap-6",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(v,{htmlFor:"rme",children:"No. RME (Rekam Medis Elekronik) "}),e.jsx(N,{id:"rme",type:"text",required:!0,autoFocus:!0,tabIndex:1,autoComplete:"rme",value:c.rme,onChange:a=>l({...c,rme:a.target.value}),disabled:f,placeholder:"Masukkan Nomor Rekam Medis Elektronik"}),e.jsx(y,{message:n.rme,className:"mt-2"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(v,{htmlFor:"orang_tua",children:"Nama Orang Tua"}),e.jsxs("div",{className:"relative w-full p-2",children:[e.jsx(N,{type:"search",id:"orang_tua",placeholder:"cari berdasarkan nama atau email yang terdaftar",required:!0,value:E,onChange:a=>P(a)}),R&&e.jsx("div",{className:"absolute top-10 rounded-xl bg-white p-2 shadow-lg",children:e.jsx("ul",{children:M.map(a=>e.jsx("li",{onClick:()=>L(a.id),className:"cursor-pointer p-2 hover:bg-gray-200",children:a.name},a.id))})})]}),e.jsx(y,{message:n.orang_tua_id})]}),o&&e.jsxs("div",{className:"space-y-4 rounded-xl border border-blue-100 bg-blue-50 p-4 dark:border-gray-700 dark:bg-gray-700/50",children:[e.jsx("h3",{className:"text-lg font-semibold text-blue-800 dark:text-blue-300",children:"Informasi Orang Tua"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Nama Orang Tua/Mewakili"}),e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:o.name})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Email"}),e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:o.email})]}),e.jsxs("div",{className:"space-y-1 md:col-span-1",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Alamat"}),e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:o.alamat})]}),e.jsxs("div",{className:"space-y-1 md:col-span-1",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"No. Hp/Whatsapp"}),e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:o.nohp})]})]})]})]}),u&&e.jsx("div",{className:"mt-6",children:e.jsx(W,{submit:S,kriteria:u,setResult:_,data:c,setData:l,processing:f,errors:n})})]})})})})]})}export{xe as default};

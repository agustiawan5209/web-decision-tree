import{r as l,m as B,j as e,L as k}from"./app-p1d1iYTT.js";import{I as o}from"./input-error-QLgA3Pc8.js";import{B as w}from"./proxy-Nz_H2BkD.js";import{I as j}from"./input-BaGDxs8C.js";import{L as m}from"./label-Ck9bnV8R.js";import{A}from"./app-layout-BJJaYQAX.js";import{i as J,S as N}from"./react-select-animated.esm-D1Z4HCBc.js";import{L as O}from"./loader-circle-CXfS1Liy.js";import"./index-Cjn_AsS7.js";import"./react-icons.esm-QNYR1xQ_.js";import"./index-Tjcag87-.js";import"./use-mobile-navigation-BGu3vK2M.js";import"./baby-bUSWWp9y.js";function y({breadcrumb:p,gejala:f,label:b,datasetSayuran:s}){const M=l.useMemo(()=>p?p.map(a=>({title:a.title,href:a.href})):[],[p]),C=l.useMemo(()=>{if(s!=null&&s.gejala){if(typeof s.gejala=="string")try{return JSON.parse(s.gejala)}catch{return s.gejala.split(",").map(i=>i.trim())}return s.gejala}return[]},[s]),L=l.useMemo(()=>{if(s!=null&&s.status){if(typeof s.status=="string")try{return JSON.parse(s.status)}catch{return s.status.split(",").map(i=>i.trim())}return s.status}return[]},[s]),[c,I]=l.useState(C),[u,_]=l.useState(L),{data:d,setData:r,post:D,processing:t,errors:n}=B({id:(s==null?void 0:s.id)??0,nama_sayuran:(s==null?void 0:s.nama_sayuran)??"",nutrisi:(s==null?void 0:s.nutrisi)??"",manfaat:(s==null?void 0:s.manfaat)??"",status:"",gejala:""});l.useEffect(()=>{r("gejala",c.join(", ")),r("status",u.join(", "))},[c,u,r]);const E=a=>{a.preventDefault(),D(route("admin.datasetSayuran.store"),{onError:i=>console.log(i)})},x=l.useMemo(()=>f.map(a=>({value:a.nama,label:a.nama})),[f]),g=l.useMemo(()=>b.map(a=>({value:a.nama,label:a.nama})),[b]),F=l.useMemo(()=>x.filter(a=>c.includes(a.value)),[x,c]),G=l.useMemo(()=>g.filter(a=>u.includes(a.value)),[g,u]),v=J(),P=a=>{const i=a?a.map(h=>h.value):[];I(i)},q=a=>{const i=a?a.map(h=>h.value):[];_(i)};return e.jsxs(A,{breadcrumbs:M,children:[e.jsx(k,{title:s?"Edit Dataset Sayuran":"Tambah Dataset Sayuran"}),e.jsx("div",{className:"dark:bg-elevation-1 flex h-full flex-1 flex-col gap-4 rounded-xl p-1 lg:p-4",children:e.jsx("div",{className:"relative min-h-[100vh] flex-1 rounded-xl border border-sidebar-border/70 md:min-h-min dark:border-sidebar-border",children:e.jsx("div",{className:"p-4 md:p-6",children:e.jsx("form",{className:"flex flex-col gap-6",onSubmit:E,children:e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(m,{htmlFor:"nama_sayuran",children:"Nama Sayuran"}),e.jsx(j,{id:"nama_sayuran",type:"text",required:!0,autoFocus:!0,tabIndex:1,autoComplete:"nama_sayuran",value:d.nama_sayuran,onChange:a=>r("nama_sayuran",a.target.value),disabled:t,placeholder:"Nama Sayuran"}),e.jsx(o,{message:n.nama_sayuran,className:"mt-2"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(m,{htmlFor:"nutrisi",children:"Nutrisi Buah"}),e.jsx(j,{id:"nutrisi",type:"text",required:!0,tabIndex:2,autoComplete:"nutrisi",value:d.nutrisi,onChange:a=>r("nutrisi",a.target.value),disabled:t,placeholder:"Nutrisi pada buah"}),e.jsx(o,{message:n.nutrisi,className:"mt-2"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(m,{htmlFor:"manfaat",children:"Manfaat"}),e.jsx(j,{id:"manfaat",type:"text",required:!0,tabIndex:3,autoComplete:"manfaat",value:d.manfaat,onChange:a=>r("manfaat",a.target.value),disabled:t,placeholder:"Manfaat sayuran"}),e.jsx(o,{message:n.manfaat})]})]}),e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(m,{htmlFor:"gejala",children:"Gejala"}),e.jsx(N,{id:"gejala",name:"gejala",value:F,onChange:P,closeMenuOnSelect:!1,components:v,isMulti:!0,options:x,isDisabled:t,className:"react-select-container",classNamePrefix:"react-select",tabIndex:4,placeholder:"Pilih gejala..."}),e.jsx(o,{message:n.gejala})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(m,{htmlFor:"status",children:"Status Nutrisi"}),e.jsx(N,{id:"status",name:"status",value:G,onChange:q,closeMenuOnSelect:!1,components:v,isMulti:!0,options:g,isDisabled:t,className:"react-select-container",classNamePrefix:"react-select",tabIndex:5,placeholder:"Pilih status nutrisi..."}),e.jsx(o,{message:n.status})]})]}),e.jsx("div",{className:"md:col-span-2",children:e.jsxs(w,{type:"submit",variant:"default",className:"mt-2 w-full",tabIndex:6,disabled:t,children:[t&&e.jsx(O,{className:"mr-2 h-4 w-4 animate-spin"}),s?"Update":"Simpan"]})})]})})})})})]})}export{y as default};
